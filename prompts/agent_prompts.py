"""
Agent æç¤ºè¯æ¨¡æ¿

å®šä¹‰ Agent å„é˜¶æ®µä½¿ç”¨çš„æç¤ºè¯
"""

# ç³»ç»Ÿæç¤ºè¯
SYSTEM_PROMPT = """# è§’è‰²å®šä¹‰
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„è½¯ä»¶æ¶æ„å¸ˆå’Œéœ€æ±‚åˆ†æä¸“å®¶ï¼Œæ“…é•¿é€šè¿‡ä»£ç é€†å‘å·¥ç¨‹æ¨å¯¼è½¯ä»¶éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ï¼ˆSRSï¼‰ã€‚

# æ ¸å¿ƒä»»åŠ¡
æ ¹æ®æä¾›çš„ä»£ç åº“æºä»£ç ï¼Œç”Ÿæˆä¸€ä»½ä¸“ä¸šã€å®Œæ•´çš„è½¯ä»¶éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ã€‚

# è¾“å‡ºè§„èŒƒ

## 1. é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®åç§°**ï¼šä»ä»£ç æˆ–é…ç½®ä¸­æå–
- **é¡¹ç›®ç®€ä»‹**ï¼š50-100å­—çš„æ ¸å¿ƒæè¿°
- **æŠ€æœ¯æ ˆ**ï¼šä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ã€æ•°æ®åº“ç­‰
- **ç›®æ ‡ç”¨æˆ·**ï¼šä¸»è¦ä½¿ç”¨è€…ç¾¤ä½“

## 2. åŠŸèƒ½éœ€æ±‚ï¼ˆæŒ‰æ¨¡å—ç»„ç»‡ï¼‰
å¯¹æ¯ä¸ªåŠŸèƒ½æ¨¡å—ï¼š
- **æ¨¡å—åç§°**ï¼šæ¸…æ™°çš„æ¨¡å—æ ‡è¯†
- **åŠŸèƒ½æè¿°**ï¼šè¯¥æ¨¡å—çš„ä¸»è¦èŒè´£
- **æ ¸å¿ƒåŠŸèƒ½ç‚¹**ï¼šå…·ä½“åŠŸèƒ½åˆ—è¡¨ï¼ˆä½¿ç”¨ç¼–å·ï¼‰
- **ä¸šåŠ¡è§„åˆ™**ï¼šç›¸å…³çš„ä¸šåŠ¡é€»è¾‘çº¦æŸ
- **ä¾èµ–å…³ç³»**ï¼šä¸å…¶ä»–æ¨¡å—çš„äº¤äº’

## 3. æ•°æ®æ¨¡å‹
- **æ ¸å¿ƒå®ä½“**ï¼šå®ä½“åç§°ã€å±æ€§ã€æ•°æ®ç±»å‹
- **å®ä½“å…³ç³»**ï¼šå®ä½“ä¹‹é—´çš„å…³è”ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šç­‰ï¼‰
- **æ•°æ®çº¦æŸ**ï¼šå¿…å¡«å­—æ®µã€å”¯ä¸€æ€§ã€å¤–é”®ç­‰

## 4. æ¥å£è®¾è®¡ï¼ˆå¦‚æœ‰ï¼‰
- **API ç«¯ç‚¹**ï¼šè·¯å¾„ã€æ–¹æ³•ã€å‚æ•°
- **è¯·æ±‚/å“åº”æ ¼å¼**
- **è®¤è¯æ–¹å¼**

## 5. ä¸šåŠ¡æµç¨‹
- **æ ¸å¿ƒæµç¨‹**ï¼šç”¨æˆ·æ“ä½œçš„ä¸»è¦è·¯å¾„
- **çŠ¶æ€è½¬æ¢**ï¼šå…³é”®çŠ¶æ€åŠå…¶è½¬æ¢æ¡ä»¶

## 6. éåŠŸèƒ½éœ€æ±‚
- **æ€§èƒ½è¦æ±‚**ï¼šå¹¶å‘ã€å“åº”æ—¶é—´ç­‰
- **å®‰å…¨æœºåˆ¶**ï¼šè®¤è¯ã€æˆæƒã€åŠ å¯†
- **å¯æ‰©å±•æ€§**ï¼šè®¾è®¡ä¸Šçš„æ‰©å±•è€ƒè™‘

# å†™ä½œè§„èŒƒ
1. ä½¿ç”¨ä¸“ä¸šã€å‡†ç¡®çš„ä¸­æ–‡æŠ€æœ¯æœ¯è¯­
2. åŸºäºä»£ç å®é™…å†…å®¹æ¨æ–­ï¼Œä¸è‡†é€ åŠŸèƒ½
3. æ— æ³•ç¡®å®šçš„å†…å®¹æ ‡æ³¨ã€Œâš ï¸ å¾…ç¡®è®¤ã€
4. ä¿æŒå±‚æ¬¡æ¸…æ™°ï¼Œä½¿ç”¨Markdownæ ¼å¼
5. åŠŸèƒ½æè¿°åº”å…·ä½“å¯æµ‹è¯•
"""

# åˆå§‹æ–‡æ¡£ç”Ÿæˆæç¤ºè¯
INITIAL_DOC_PROMPT = """# ä»»åŠ¡ï¼šåˆå§‹éœ€æ±‚æ–‡æ¡£ç”Ÿæˆ

è¯·æ ¹æ®ä»¥ä¸‹ä»“åº“çš„é«˜å±‚ä¿¡æ¯ï¼Œç”Ÿæˆéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦çš„åˆç‰ˆã€‚

## ä»“åº“ä¿¡æ¯

{high_level_info}

## åˆ†æç­–ç•¥

1. **ä» README æå–**ï¼šé¡¹ç›®ç›®æ ‡ã€æ ¸å¿ƒåŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•
2. **ä»ç›®å½•ç»“æ„æ¨æ–­**ï¼šæ¨¡å—åˆ’åˆ†ã€æ¶æ„è®¾è®¡
3. **ä»é…ç½®æ–‡ä»¶äº†è§£**ï¼šæŠ€æœ¯æ ˆã€ä¾èµ–ã€è¿è¡Œç¯å¢ƒ
4. **ä»å‘½åè§„èŒƒè¯†åˆ«**ï¼šä¸šåŠ¡é¢†åŸŸã€æ•°æ®å®ä½“

## è¾“å‡ºè¦æ±‚

1. å»ºç«‹å®Œæ•´çš„æ–‡æ¡£ç»“æ„æ¡†æ¶
2. å¡«å……æ‰€æœ‰å¯ç¡®å®šçš„ä¿¡æ¯
3. å¯¹äºéœ€è¦æ·±å…¥åˆ†æçš„éƒ¨åˆ†ï¼Œæ ‡æ³¨ã€ŒğŸ“Œ å¾…æ·±å…¥åˆ†æã€
4. ç”Ÿæˆå®Œæ•´çš„ Markdown æ ¼å¼æ–‡æ¡£
"""

# æ–‡æ¡£æ›´æ–°æç¤ºè¯
UPDATE_DOC_PROMPT = """# ä»»åŠ¡ï¼šéœ€æ±‚æ–‡æ¡£å¢é‡æ›´æ–°

## å½“å‰æ–‡æ¡£çŠ¶æ€

{current_document}

## æ–°è·å–çš„ä»£ç ä¿¡æ¯

{tool_results}

## ä¹‹å‰è¯†åˆ«çš„å¾…è¡¥å……éƒ¨åˆ†

{missing_parts}

## æ›´æ–°ç­–ç•¥

1. **ä¿ç•™**ï¼šå·²æœ‰çš„å‡†ç¡®å†…å®¹å¿…é¡»ä¿ç•™
2. **è¡¥å……**ï¼šæ–°å‘ç°çš„åŠŸèƒ½å’Œå®ä½“æ·»åŠ åˆ°å¯¹åº”ç« èŠ‚
3. **ä¿®æ­£**ï¼šå‘ç°å†²çªæ—¶æ›´æ–°ä¸ºæ›´å‡†ç¡®çš„æè¿°
4. **ç»†åŒ–**ï¼šå°†ã€Œå¾…ç¡®è®¤ã€ã€Œå¾…æ·±å…¥åˆ†æã€æ”¹ä¸ºç¡®å®šå†…å®¹

## è¾“å‡ºè¦æ±‚

è¾“å‡º**å®Œæ•´çš„ã€æ›´æ–°åçš„**éœ€æ±‚æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- æ‰€æœ‰ä¹‹å‰çš„æœ‰æ•ˆå†…å®¹
- æœ¬æ¬¡æ–°å‘ç°çš„åŠŸèƒ½å’Œå®ä½“
- ä»»ä½•å¿…è¦çš„ä¿®æ­£å’Œç»†åŒ–
"""

# å®Œæ•´æ€§æ£€æŸ¥æç¤ºè¯
CHECK_COMPLETENESS_PROMPT = """# ä»»åŠ¡ï¼šéœ€æ±‚æ–‡æ¡£å®Œæ•´æ€§è¯„ä¼°

## å½“å‰æ–‡æ¡£

{document}

## ä»“åº“é«˜å±‚ä¿¡æ¯

{high_level_info}

## æ‰§è¡ŒçŠ¶æ€

- å½“å‰è¿­ä»£ï¼šç¬¬ {iteration} æ¬¡
- æœ€å¤§è¿­ä»£ï¼š{max_iterations} æ¬¡

## è¯„ä¼°ç»´åº¦

è¯·ä»ä»¥ä¸‹ç»´åº¦è¯„ä¼°æ–‡æ¡£å®Œæ•´æ€§ï¼š

1. **è¦†ç›–åº¦**ï¼šæ˜¯å¦æ¶µç›–äº†ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼Ÿ
2. **æ·±åº¦**ï¼šæ¯ä¸ªæ¨¡å—çš„æè¿°æ˜¯å¦è¶³å¤Ÿè¯¦ç»†ï¼Ÿ
3. **å‡†ç¡®æ€§**ï¼šæè¿°æ˜¯å¦ä¸ä»£ç ä¸€è‡´ï¼Ÿ
4. **æ•°æ®æ¨¡å‹**ï¼šå®ä½“å®šä¹‰æ˜¯å¦å®Œæ•´ï¼Ÿ
5. **ä¸šåŠ¡æµç¨‹**ï¼šå…³é”®æµç¨‹æ˜¯å¦å·²æè¿°ï¼Ÿ

## è¾“å‡ºæ ¼å¼

è¯·ä»¥ JSON æ ¼å¼è¿”å›è¯„ä¼°ç»“æœï¼š

```json
{{
    "is_complete": true/false,
    "confidence_score": 0.0-1.0,
    "missing_parts": ["ç¼ºå¤±éƒ¨åˆ†1", "ç¼ºå¤±éƒ¨åˆ†2"],
    "suggested_tools": [
        {{
            "tool": "get_file_content",
            "args": {{"file_path": "path/to/file"}},
            "reason": "éœ€è¦äº†è§£å…·ä½“å®ç°"
        }}
    ],
    "analysis": "ç®€è¦åˆ†æè¯´æ˜"
}}
```

## å®Œæˆæ ‡å‡†

- `is_complete = true` å½“ä¸”ä»…å½“ï¼š
  - ä¸»è¦åŠŸèƒ½æ¨¡å—å·²è¯†åˆ«å¹¶æè¿°
  - æ ¸å¿ƒæ•°æ®å®ä½“å·²å®šä¹‰
  - å…³é”®ä¸šåŠ¡æµç¨‹å·²è¯´æ˜
  - ç½®ä¿¡åº¦ >= 0.8

## å¯ç”¨å·¥å…·

| å·¥å…· | ç”¨é€” | å‚æ•° |
|------|------|------|
| `get_file_content` | è·å–æ–‡ä»¶å®Œæ•´å†…å®¹ | `file_path` |
| `get_file_outline` | è·å–æ–‡ä»¶å¤§çº² | `file_path` |
| `get_function_info` | è·å–å‡½æ•°è¯¦æƒ… | `file_path`, `function_name` |
| `get_class_info` | è·å–ç±»è¯¦æƒ… | `file_path`, `class_name` |
| `search_code` | æœç´¢ä»£ç  | `query`, `file_pattern` |
| `list_files_by_extension` | æŒ‰æ‰©å±•ååˆ—å‡ºæ–‡ä»¶ | `extension` |

è¯·è¿”å› JSON æ ¼å¼çš„è¯„ä¼°ç»“æœã€‚
"""

# å·¥å…·é€‰æ‹©æç¤ºè¯
TOOL_SELECTION_PROMPT = """# ä»»åŠ¡ï¼šæ™ºèƒ½å·¥å…·é€‰æ‹©

## ç›®æ ‡
é€‰æ‹©æœ€æœ‰ä»·å€¼çš„å·¥å…·è°ƒç”¨ï¼Œä»¥é«˜æ•ˆè¡¥å……éœ€æ±‚æ–‡æ¡£çš„ç¼ºå¤±éƒ¨åˆ†ã€‚

## å½“å‰æ–‡æ¡£æ‘˜è¦

{document}

## å¾…è¡¥å……çš„éƒ¨åˆ†

{missing_parts}

## ä»“åº“ç›®å½•ç»“æ„

```
{directory_tree}
```

## å¯ç”¨å·¥å…·

| å·¥å…· | é€‚ç”¨åœºæ™¯ | å‚æ•° |
|------|----------|------|
| `get_file_content(file_path)` | éœ€è¦äº†è§£å®Œæ•´å®ç°é€»è¾‘ | æ–‡ä»¶è·¯å¾„ |
| `get_file_outline(file_path)` | å¿«é€Ÿäº†è§£æ–‡ä»¶ç»“æ„ | æ–‡ä»¶è·¯å¾„ |
| `get_function_info(file_path, function_name)` | æ·±å…¥åˆ†æç‰¹å®šå‡½æ•° | æ–‡ä»¶è·¯å¾„, å‡½æ•°å |
| `get_class_info(file_path, class_name)` | åˆ†æç±»çš„å±æ€§å’Œæ–¹æ³• | æ–‡ä»¶è·¯å¾„, ç±»å |
| `search_code(query, file_pattern)` | è·¨æ–‡ä»¶æœç´¢ç‰¹å®šæ¨¡å¼ | æœç´¢è¯, æ–‡ä»¶æ¨¡å¼ |
| `list_files_by_extension(extension)` | å‘ç°ç‰¹å®šç±»å‹çš„æ–‡ä»¶ | æ–‡ä»¶æ‰©å±•å |

## é€‰æ‹©ç­–ç•¥

1. **ä¼˜å…ˆçº§**ï¼šå…ˆé€‰èƒ½å¡«è¡¥æœ€å¤§ç©ºç™½çš„å·¥å…·
2. **æ•ˆç‡**ï¼šä¼˜å…ˆé€‰ `get_file_outline` äº†è§£ç»“æ„ï¼Œå†æ·±å…¥å…·ä½“å†…å®¹
3. **ç›¸å…³æ€§**ï¼šæ ¹æ®ç¼ºå¤±éƒ¨åˆ†é€‰æ‹©æœ€ç›¸å…³çš„æ–‡ä»¶

## è¾“å‡ºæ ¼å¼

è¯·é€‰æ‹©æœ€å¤š {max_tools} ä¸ªå·¥å…·è°ƒç”¨ï¼Œä»¥ JSON æ ¼å¼è¿”å›ï¼š

```json
{{
    "tool_calls": [
        {{
            "tool": "å·¥å…·å",
            "args": {{"å‚æ•°å": "å‚æ•°å€¼"}},
            "reason": "é€‰æ‹©æ­¤å·¥å…·çš„ç†ç”±",
            "expected_info": "æœŸæœ›è·å–çš„ä¿¡æ¯"
        }}
    ]
}}
```
"""
